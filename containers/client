FROM docker.io/library/golang:1.24-bookworm as builder

WORKDIR /build

COPY . .

RUN --mount=type=cache,target=/go make setup build check

FROM scratch

COPY --from=builder /build/bin/client /client

ENTRYPOINT ["/client"]
